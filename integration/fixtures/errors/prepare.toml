[[test]]
name = 'ColumnNameAlreadyTaken'
query = '''
--! items
SELECT name, price AS name FROM item;
'''
migration = '''
CREATE TABLE item (
  name TEXT,
  price INTEGER
);
'''
error = '''
× column `name` appear multiple time
   ╭─[queries/module_1.sql:1:1]
 1 │ --! items
   ·     ──┬──
   ·       ╰── query returns one or more columns with the same name
 2 │ SELECT name, price AS name FROM item;
   ╰────
  help: disambiguate column names in your SQL using an `AS` clause'''

[[test]]
name = 'InconsistentTypes'
query = '''
--! insert_author
INSERT INTO Author (id, name) VALUES (:name, :name);
'''
migration = '''
CREATE TABLE author (
  id SERIAL,
  name TEXT
);
'''
error = '''
cornucopia::prepare_queries

  × Couldn't prepare query: inconsistent types deduced for parameter $1
   ╭─[queries/module_1.sql:1:1]
 1 │ --! insert_author
 2 │ INSERT INTO Author (id, name) VALUES (:name, :name);
   ·                                            ▲
   ·                                            ╰── error occurs near this location
   ╰────'''
